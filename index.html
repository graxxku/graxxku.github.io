<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Graxx Health</title>
    <link rel="stylesheet" href="assets/css/style.css" />

    <!-- (C) WEB APP MANIFEST -->
    <!-- https://web.dev/add-manifest/ -->
    <link rel="manifest" href="/manifest.json">
  </head>
  <body>
    

    <div class="app-layout mdl-layout mdl-js-layout tab-content-container">
      

      <main class="mdl-layout__content">

        

        <h3>Graxx Sport</h3>
        <div id="canvas">animation</div>
        
        <button onclick="home()" class=" connect-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">Home</button>
        <button onclick="settings()" class="connect-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">Settings</button>
        <button onclick="connect()" class="tab-content connect-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">Connect</button>
        
      </main>
  
      <div id="settings" class="tab-content">
        <div class="card" onclick="toggleContent()">Setting 1</div>
            <div class="hidden-content" id="setting1-content" style="display: none"><p>This is the content for Setting 1.</p></div>
        <div class="card">Setting 2</div>
      </div>

      

    </div>

    

    
    
    

    <!-- 
      Scripts 
    -->
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Tensorflow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.13.3/dist/tf.min.js"></script>
    <!-- App Scripts -->
    <script src="assets/js/classes.js"></script>
    <script src="assets/js/build.js"></script>
    <script src="assets/js/predict.js"></script>

    <script src="lib/three.min.js"></script>
    <script src="lib/mannequin.js"></script>
    

    <script>
  
      createScene();
      man = new Male();

      // stick
      geometry = new THREE.CylinderGeometry(0.4, 0.4, 80);
      material = new THREE.MeshPhongMaterial({color: 'crimson'});
      stick = new THREE.Mesh(geometry, material);
      stick.rotation.x = rad(90);
      stick.position.set(-1, 0.25, 0);
      stick.castShadow = true;

      man.r_fingers.attach(stick);

      // posture from example-posture.html
      A = {"version":7,"data":[[0,-7.2,0],[90,-85,74.8],[16.1,-29.5,26.3],[3.5,-34.8,6.1],[14.1,-2.9,-19.8],[30],[-6,-6,-42.6],[14.6,-46.9,98.9],[90],[4.9,9,-15.4],[68.9,-34.7,-2.1],[155],[-20,0,0],[-90,70,85,0,-5,0,-5],[0,0,-10,0,-10,0,-10],[0,0,-10,0,-10,0,-10],[0,0,-10,0,-10,0,-10],[0,0,-10,0,-10,0,-10],[-77,4.9,-1.1],[55],[-5,-60,-20],[148.7,-4.4,127.3,0,50,0,35],[0,0,70,0,70,0,70],[0,0,70,0,70,0,70],[0,0,70,0,70,0,70],[0,0,70,0,70,0,70]]};

      // posture from example-posture-standing.html
      B = {"version":7,"data":[[0,2.8,0],[0,-90,0],[0,0,-2],[0,0,5],[16,0,0],[0],[-16.1,-5.8,-1.7],[-16,0,0],[0],[16.1,5.8,-1.7],[15.1,-11.3,-12],[30],[5,0,0],[-90,70,100,0,10,0,10],[0,0,20,0,20,0,20],[0,0,20,0,20,0,20],[0,0,20,0,20,0,20],[0,0,20,0,20,0,20],[-28.4,8.1,-18.3],[70],[-5,28,37.4],[148.7,-4.4,127.3,0,50,0,35],[0,0,70,0,70,0,70],[0,0,70,0,70,0,70],[0,0,70,0,70,0,70],[0,0,70,0,70,0,70]]};

      function animate(t)
      {
      
        var k = THREE.MathUtils.clamp(0.5 + 0.6 * sin(t), 0, 1);

        man.posture = Mannequin.blend(A, B, k);
        man.position.x = THREE.MathUtils.mapLinear(k, 0, 1, -30, 30);
        man.rotation.y = THREE.MathUtils.mapLinear(k, 0, 1, 2, 0);

        var bottom = Math.min(
          man.l_ankle.point(6, 2, 0).y,
          man.l_ankle.point(-2, 2.5, 0).y,
          man.l_ankle.point(2, 2.5, 2).y,
          man.l_ankle.point(2, 2.5, -2).y
        );
        man.position.y += (-29.5 - bottom);

        scene.rotation.y = sin(t / 10);
      }
      
    </script>
  
  <!-- ble -->
  <script src="lib/ble.js"></script>
    

  <!-- (D) SERVICE WORKER -->
  <script>
    if ("serviceWorker" in navigator) { navigator.serviceWorker.register("sw.js") }
  </script>


  </body>
</html>
